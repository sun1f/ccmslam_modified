<?xml version="1.0"?>
<launch>

  <arg name="dist" default="0"/>

  <!-- -start disturber before group ns -->
  <group if="$(arg dist)">
    <node pkg="ccmslam" type="ccmslamCommTestDisturber" name="Disturber" args="0.0 0.0 0.0" output="screen" />
  </group>

  <group ns="ccmslam">

    <!-- args参数顺序：x y z yaw pitch roll frame_id child_frame_id period_in_ms，此处使用这种欧拉角表示，yaw pitch roll分别对应Z,Y,X轴的旋转-->
    <!--  也可以是：x y z qx qy qz qw frame_id child_frame_id  period_in_ms-->
    <!-- 最后一个参数是发布频率，单位毫秒，通常取100，100ms即0.1s，也就是10Hz -->

    <node pkg="tf" type="static_transform_publisher" name="linkS0_broadcaster" args="0 0 5 -1.571 0 -2 world odomS0 100" />
    <node pkg="tf" type="static_transform_publisher" name="linkS1_broadcaster" args="0 0 5 -1.571 0 -2 world odomS1 100" />
    <!-- <node pkg="tf" type="static_transform_publisher" name="linkS2_broadcaster" args="0 0 5 -1.571 0 -2 world odomS2 100" />
    <node pkg="tf" type="static_transform_publisher" name="linkS3_broadcaster" args="0 0 5 -1.571 0 -2 world odomS3 100" /> -->

    <node pkg="ccmslam" type="ccmslamServerNode" name="ccmslamServerNode" args="$(find ccmslam)/conf/ORBvoc.txt" output="screen">

      <!-- +++++++++++++++++++++++++++++++++++++++++++++ -->
      <!-- !!! ADJUST INPUT TOPIC NAMES IF NECESSARY !!! -->
      <!-- +++++++++++++++++++++++++++++++++++++++++++++ -->

      <param name="NumOfClients" type="int" value="2" />

      <param name="LoadMap" type="bool" value="false" />

      <!-- Client 0 -->

      <!-- server和client进行的是双向数据传输！ -->
      <!-- "~"表示在当前命名空间下 -->
      <param name="FrameId0" type="string" value="odomS0" />
      <param name="~MapInTopicName0" type="string" value="MapOutClient0" unless="$(arg dist)" />
      <param name="~MapInTopicName0" type="string" value="MapOutClient0Disturbed" if="$(arg dist)" />

      <!-- Client 1 -->
      <param name="FrameId1" type="string" value="odomS1" />
      <param name="~MapInTopicName1" type="string" value="MapOutClient1" unless="$(arg dist)" />
      <param name="~MapInTopicName1" type="string" value="MapOutClient1Disturbed" if="$(arg dist)" />

    </node>
  </group>
  <node pkg="rviz" type="rviz" name="rviz" args="-d $(find ccmslam)/conf/rviz/ccmslam.rviz" required="true" />
</launch>